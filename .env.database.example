# 数据库配置示例
# 复制此文件为 .env.local 并根据需要修改配置

# ==========================================
# 数据库类型和连接配置
# ==========================================

# 数据库类型选择: sqlite | postgresql | mysql
DATABASE_TYPE=sqlite

# SQLite 配置（本地开发推荐）
DATABASE_URL="file:./data/app.db"

# PostgreSQL 配置（生产环境推荐）  
# DATABASE_TYPE=postgresql
# DATABASE_URL="postgresql://username:password@localhost:5432/listening_app"

# MySQL 配置（备选方案）
# DATABASE_TYPE=mysql
# DATABASE_URL="mysql://username:password@localhost:3306/listening_app"

# ==========================================
# 数据库连接池配置（生产环境）
# ==========================================

# 连接池大小（仅 PostgreSQL/MySQL）
# DATABASE_CONNECTION_LIMIT=20

# 连接超时（毫秒）
# DATABASE_TIMEOUT=20000

# ==========================================
# 数据迁移配置
# ==========================================

# 迁移时的源数据库路径（SQLite）
MIGRATION_SOURCE_DB="./data/app.db"

# 迁移批处理大小
MIGRATION_BATCH_SIZE=100

# ==========================================
# 应用其他配置
# ==========================================

# AI 服务配置
CEREBRAS_API_KEY=your_api_key_here
CEREBRAS_BASE_URL=https://api.cerebras.ai

# TTS 配置
TTS_MODE=local
PYTORCH_ENABLE_MPS_FALLBACK=1

# 管理员配置
ADMIN_PASSWORD=admin123

# 应用基础URL
APP_BASE_URL=http://localhost:3000

# ==========================================
# 使用说明
# ==========================================

# 1. 本地开发（默认 SQLite）：
#    DATABASE_TYPE=sqlite
#    DATABASE_URL="file:./data/app.db"

# 2. 切换到 PostgreSQL：
#    DATABASE_TYPE=postgresql
#    DATABASE_URL="postgresql://user:pass@localhost:5432/listening_app"
#    然后运行：npm run db:push

# 3. 数据迁移：
#    # 从 SQLite 迁移到 PostgreSQL
#    DATABASE_TYPE=postgresql DATABASE_URL="postgresql://..." npm run migrate-data
#    
#    # 验证数据一致性
#    npm run migrate-data:verify
#    
#    # 回滚（清空目标数据库）
#    npm run migrate-data:rollback

# 4. 生产部署：
#    # 设置环境变量
#    export DATABASE_TYPE=postgresql
#    export DATABASE_URL="postgresql://..."
#    
#    # 运行 Prisma 迁移
#    npm run db:deploy
#    
#    # 启动应用
#    npm run start