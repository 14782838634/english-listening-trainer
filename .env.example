# 英语听力训练应用配置示例
# 将此文件复制为 .env.local 并填入实际值

# ==========================================
# 应用基础配置
# ==========================================
NODE_ENV=development
PORT=3000
HOST=localhost

# 应用 URL 和密钥配置 (生产环境必填)
NEXT_PUBLIC_APP_URL=https://yourdomain.com
APP_BASE_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-key-here
JWT_SECRET=your-jwt-secret-here
SESSION_SECRET=your-session-secret-here
APP_SECRET=your-app-secret-key-here

# ==========================================
# 数据库连接配置 (生产环境)
# ==========================================
# 数据库类型: sqlite | postgresql | mysql
DATABASE_TYPE=sqlite

# 生产环境数据库连接 (选择其一)
# PostgreSQL (推荐生产环境):
DATABASE_URL=postgresql://username:password@localhost:5432/listening_app
# MySQL (备选):
# DATABASE_URL=mysql://username:password@localhost:3306/listening_app

# SQLite 配置 (开发环境默认)
DATABASE_PATH=data/app.db
DB_TIMEOUT=10000
DB_JOURNAL_MODE=WAL
DB_SYNCHRONOUS=NORMAL
DB_CACHE_SIZE=2000
DB_MMAP_SIZE=268435456
DB_FOREIGN_KEYS=true

# 数据库服务器配置 (Docker/生产部署)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=listening_app
DB_USER=postgres
DB_PASSWORD=your-postgres-password
DB_ROOT_PASSWORD=your-mysql-root-password

# ==========================================
# Cerebras AI API 配置
# ==========================================
CEREBRAS_API_KEY=csk-your-api-key-here
CEREBRAS_BASE_URL=https://api.cerebras.ai
AI_TIMEOUT=30000
AI_MAX_RETRIES=3
AI_DEFAULT_MODEL=llama3.1-8b

# ==========================================
# TTS 配置 (仅 Kokoro TTS)
# ==========================================
# TTS 模式: local | disabled
TTS_MODE=local

# Kokoro TTS API 配置 (生产环境可独立部署)
KOKORO_API_URL=http://localhost:8080/tts
KOKORO_DEVICE=auto  # auto/cuda/metal/cpu

# 本地 Kokoro TTS 配置
ENABLE_TTS=true
TTS_PYTHON_PATH=kokoro-local/venv/bin/python
TTS_VENV_PATH=kokoro-local/venv
TTS_TIMEOUT=30000
TTS_MAX_CONCURRENT=1
TTS_MAX_RESTARTS=3
TTS_RESTART_COOLDOWN=5000

# GPU/CUDA 支持配置 (生产服务器)
CUDA_VISIBLE_DEVICES=0
PYTORCH_ENABLE_MPS_FALLBACK=1

# ==========================================
# 存储路径配置
# ==========================================
# 数据存储路径
DATA_PATH=./data
STORAGE_PATH=./storage
UPLOAD_DIR=/data/listening-app/uploads

# 音频文件存储路径
AUDIO_PATH=./public/audio
PUBLIC_AUDIO_URL=/audio

# 日志文件路径
LOGS_PATH=./logs

# ==========================================
# 安全和管理配置
# ==========================================
ADMIN_PASSWORD=your-secure-admin-password
ADMIN_EMAIL=admin@yourdomain.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
RATE_LIMIT=60

# 初始邀请码 (逗号分隔)
INITIAL_INVITE_CODES=LISTEN-1234,LISTEN-5678,LISTEN-DEMO

# ==========================================
# 功能开关
# ==========================================
ENABLE_ANALYTICS=false
ENABLE_CACHING=true
ENABLE_LOGGING=true
ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true

# ==========================================
# 缓存配置 (可选)
# ==========================================
REDIS_URL=redis://localhost:6379
CACHE_TTL=3600

# ==========================================
# Docker 部署配置
# ==========================================
# 容器健康检查
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# 数据卷挂载路径 (生产环境)
DOCKER_DATA_PATH=/app/data
DOCKER_AUDIO_PATH=/app/public/audio
DOCKER_LOGS_PATH=/app/logs